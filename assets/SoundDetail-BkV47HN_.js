import{_ as R,c as i,l as T,r as V,a as r,b as s,t as o,u as D,m as I,F as v,f as p,d as _,w as b,e as M,p as P,o as u,h as f,i as q}from"./index-CHByyoby.js";import{u as z,S as E}from"./SoundCard-CkeOETID.js";import{A as J}from"./AMapView-DnCWBAsZ.js";import{s as k}from"./demo-D30EAGrZ.js";const K={key:0,class:"page"},j={class:"detail-hero"},G={class:"hero-main"},H={class:"tag"},O={class:"hero-location"},Q={class:"hero-story"},U={class:"hero-meta"},W={class:"hero-actions"},X={class:"player"},Y={class:"player-bar"},Z={class:"player-meta"},ss=["value"],ts={class:"hero-panel"},es={class:"wave-panel"},os={class:"wave-bars"},ls={class:"stat-panel"},ns={class:"stat-value"},as={class:"stat-value"},is={class:"stat-value"},us={class:"map-panel"},rs={class:"section"},ds={class:"comment-grid"},cs={class:"comment-head"},vs={class:"section"},ps={class:"section-head"},_s={class:"sound-grid"},ms={key:1,class:"empty"},hs={__name:"SoundDetail",setup(gs){const x=T(),m=P(),e=i(()=>k.find(n=>n.id===x.params.id)),c=V(!1),{state:a,toggle:S,seek:w}=z(),h=i(()=>e.value&&a.currentId===e.value.id),C=i(()=>h.value&&a.isPlaying),g=i(()=>!h.value||!a.duration?0:a.currentTime/a.duration*100),L=i(()=>y(a.currentTime)),B=i(()=>y(a.duration)),$=i(()=>e.value?k.filter(n=>n.id!==e.value.id&&n.tag===e.value.tag).slice(0,3):[]),A=[{name:"阿梁",time:"2 小时前",text:"这段真的能闻到海风的味道，太真实了。"},{name:"June",time:"昨天",text:"听着像回到了早市，摊贩的吆喝很有画面感。"},{name:"Kiko",time:"2 天前",text:"建议加上拍摄时间，想收藏做素材。"}],y=n=>{const t=Math.floor((n||0)/60),d=Math.floor((n||0)%60);return`${t.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},F=n=>{const t=Number(n.target.value)/100;w(t)},N=()=>{window.history.length>1?m.back():m.push("/sounds")};return(n,t)=>{const d=M("RouterLink");return e.value?(u(),r("div",K,[s("button",{class:"text-button back",onClick:N},"返回声景库"),s("section",j,[s("div",G,[s("span",H,o(e.value.tag),1),s("h1",null,o(e.value.title),1),s("p",O,o(e.value.location),1),s("p",Q,o(e.value.story),1),s("div",U,[s("span",null,"录制时间："+o(e.value.recordedAt),1),s("span",null,"设备："+o(e.value.equipment),1)]),s("div",W,[s("button",{class:"primary-button",onClick:t[0]||(t[0]=l=>D(S)(e.value.id,e.value.audio))},o(C.value?"暂停声音":"播放声音"),1),s("button",{class:"ghost-button",onClick:t[1]||(t[1]=l=>c.value=!c.value)},o(c.value?"已收藏":"收藏声音"),1)]),s("div",X,[s("div",Y,[s("span",{style:I({width:`${g.value}%`})},null,4)]),s("div",Z,[s("span",null,o(L.value),1),s("input",{type:"range",min:"0",max:"100",value:g.value,onInput:F},null,40,ss),s("span",null,o(B.value),1)])])]),s("div",ts,[s("div",es,[t[2]||(t[2]=s("p",null,"声波预览",-1)),s("div",os,[(u(),r(v,null,p(12,l=>s("span",{key:l})),64))])]),s("div",ls,[s("div",null,[s("p",ns,o(e.value.plays),1),t[3]||(t[3]=s("p",{class:"stat-label"},"播放",-1))]),s("div",null,[s("p",as,o(e.value.likes),1),t[4]||(t[4]=s("p",{class:"stat-label"},"收藏",-1))]),s("div",null,[s("p",is,o(e.value.duration),1),t[5]||(t[5]=s("p",{class:"stat-label"},"时长",-1))])]),s("div",us,[t[6]||(t[6]=s("p",null,"地图坐标",-1)),s("span",null,o(e.value.coords.lat.toFixed(4))+", "+o(e.value.coords.lng.toFixed(4)),1),_(J,{points:[e.value],height:"180px"},null,8,["points"])])])]),s("section",rs,[t[7]||(t[7]=s("div",{class:"section-head"},[s("div",null,[s("h2",null,"评论与回应"),s("p",null,"来自社区的即时反馈与补充线索。")]),s("button",{class:"ghost-button"},"写评论")],-1)),s("div",ds,[(u(),r(v,null,p(A,l=>s("article",{key:l.name+l.time,class:"comment-card"},[s("div",cs,[s("span",null,o(l.name),1),s("small",null,o(l.time),1)]),s("p",null,o(l.text),1)])),64))])]),s("section",vs,[s("div",ps,[s("div",null,[t[8]||(t[8]=s("h2",null,"同类声音",-1)),s("p",null,"更多来自 "+o(e.value.city)+" 的 "+o(e.value.tag)+" 声音。",1)]),_(d,{class:"ghost-button",to:"/sounds"},{default:b(()=>[...t[9]||(t[9]=[f("回到列表",-1)])]),_:1})]),s("div",_s,[(u(!0),r(v,null,p($.value,l=>(u(),q(E,{key:l.id,sound:l},null,8,["sound"]))),128))])])])):(u(),r("div",ms,[t[11]||(t[11]=s("h2",null,"没有找到这个声音",-1)),t[12]||(t[12]=s("p",null,"它可能被移除或尚未发布。",-1)),_(d,{class:"primary-button",to:"/sounds"},{default:b(()=>[...t[10]||(t[10]=[f("返回声景库",-1)])]),_:1})]))}}},xs=R(hs,[["__scopeId","data-v-72f380b0"]]);export{xs as default};
