import{_ as T,r as p,c as m,a as i,b as s,d as D,t as _,w as V,e as B,j as C,v as N,F as k,f as h,k as L,o as a,h as A,n as S,i as F}from"./index-BlCAvboD.js";import{S as K}from"./SoundCard-C2gB7FiB.js";import{s as y}from"./demo-D30EAGrZ.js";const M={class:"page"},R={class:"page-header"},U={class:"count"},$={class:"filter-panel"},j={class:"search"},z={class:"filter-group"},E={class:"chips"},I=["onClick"],q={class:"filter-group"},G={class:"chips"},H=["onClick"],J={class:"search"},O={key:0,class:"sound-grid"},P={key:1,class:"empty"},Q={__name:"Sounds",setup(W){const c=p(""),r=p("全部"),u=p("全部"),n=p("默认"),b=m(()=>["全部",...new Set(y.map(o=>o.tag))]),w=m(()=>["全部",...new Set(y.map(o=>o.city))]),d=o=>{if(!o)return 0;const e=o.split(":").map(l=>Number(l));return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0},g=o=>o?new Date(o.replace(" ","T")).getTime():0,v=m(()=>{const o=c.value.trim();let e=y.filter(l=>{const t=r.value==="全部"||l.tag===r.value,f=u.value==="全部"||l.city===u.value,x=!o||l.title.includes(o)||l.location.includes(o)||l.mood.includes(o);return t&&f&&x});return n.value==="热度"?e=[...e].sort((l,t)=>t.heat-l.heat):n.value==="最新"?e=[...e].sort((l,t)=>g(t.recordedAt)-g(l.recordedAt)):n.value==="播放"?e=[...e].sort((l,t)=>(t.plays||0)-(l.plays||0)):n.value==="收藏"?e=[...e].sort((l,t)=>(t.likes||0)-(l.likes||0)):n.value==="时长(长-短)"?e=[...e].sort((l,t)=>d(t.duration)-d(l.duration)):n.value==="时长(短-长)"?e=[...e].sort((l,t)=>d(l.duration)-d(t.duration)):n.value==="标题"?e=[...e].sort((l,t)=>l.title.localeCompare(t.title)):n.value==="城市"&&(e=[...e].sort((l,t)=>l.city.localeCompare(t.city))),e});return(o,e)=>{const l=B("RouterLink");return a(),i("div",M,[s("header",R,[s("div",null,[e[2]||(e[2]=s("h1",null,"城市声景库",-1)),e[3]||(e[3]=s("p",null,"按地点、情绪与标签筛选声音片段，建立你的城市声音收藏。",-1)),s("p",U,"共 "+_(v.value.length)+" 条声音",1)]),D(l,{class:"primary-button",to:"/upload"},{default:V(()=>[...e[4]||(e[4]=[A("新增采集",-1)])]),_:1})]),s("section",$,[s("label",j,[e[5]||(e[5]=s("span",null,"关键词",-1)),C(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),type:"text",placeholder:"搜索标题、地点或描述"},null,512),[[N,c.value]])]),s("div",z,[e[6]||(e[6]=s("span",null,"标签",-1)),s("div",E,[(a(!0),i(k,null,h(b.value,t=>(a(),i("button",{key:t,class:S(["chip",{active:r.value===t}]),onClick:f=>r.value=t},_(t),11,I))),128))])]),s("div",q,[e[7]||(e[7]=s("span",null,"城市",-1)),s("div",G,[(a(!0),i(k,null,h(w.value,t=>(a(),i("button",{key:t,class:S(["chip",{active:u.value===t}]),onClick:f=>u.value=t},_(t),11,H))),128))])]),s("label",J,[e[9]||(e[9]=s("span",null,"排序",-1)),C(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t)},[...e[8]||(e[8]=[s("option",null,"默认",-1),s("option",null,"热度",-1),s("option",null,"最新",-1),s("option",null,"播放",-1),s("option",null,"收藏",-1),s("option",null,"时长(长-短)",-1),s("option",null,"时长(短-长)",-1),s("option",null,"标题",-1),s("option",null,"城市",-1)])],512),[[L,n.value]])])]),v.value.length?(a(),i("section",O,[(a(!0),i(k,null,h(v.value,t=>(a(),F(K,{key:t.id,sound:t},null,8,["sound"]))),128))])):(a(),i("div",P,[...e[10]||(e[10]=[s("h3",null,"没有匹配的声音",-1),s("p",null,"尝试调整关键词或标签筛选。",-1)])]))])}}},ee=T(Q,[["__scopeId","data-v-cbda2f15"]]);export{ee as default};
