import{_ as w,x as B,c as _,l as D,r as v,a as u,b as t,t as e,F as g,f as b,j as R,v as V,d as L,w as N,e as j,p as F,o as i,h as I}from"./index-BlCAvboD.js";import{t as S}from"./community-C-1U7jpS.js";const z={key:0,class:"page"},A={class:"hero"},E={class:"hero-text"},H={class:"hero-actions"},J={class:"hero-image"},M=["src","alt"],U={class:"stats"},q={class:"detail-grid"},G={class:"detail-card"},K={class:"detail-card"},O={class:"detail-card"},P={class:"comment-list"},Q={class:"comment-box"},W={class:"comment-actions"},X={class:"submit-hint"},Y={key:1,class:"empty"},Z={__name:"TopicDetail",setup($){const f=D(),h=F(),{state:r}=B(),n=_(()=>S.find(o=>o.id===f.params.id)),d=v(!1),m=v(!1),c=v(""),a=v(""),p=_(()=>{if(!n.value)return null;const o=d.value?1:0;return{members:n.value.stats.members+o,today:n.value.stats.today+o,sounds:n.value.stats.sounds}}),x=()=>{if(!r.user){a.value="请先登录后参与话题。";return}d.value=!d.value},y=()=>{if(!r.user){a.value="请先登录后收藏话题。";return}m.value=!m.value},k=()=>{if(!r.user){a.value="请先登录后再提交。";return}const o=c.value.trim();if(!o){a.value="请输入评论内容。";return}n.value.discussions.unshift({name:r.user?.name||"我",time:"刚刚",text:o}),c.value="",a.value="已提交",setTimeout(()=>{a.value=""},2e3)},C=()=>{h.push("/community")};return(o,s)=>{const T=j("RouterLink");return n.value?(i(),u("div",z,[t("button",{class:"text-button back",onClick:C},"返回社区"),t("section",A,[t("div",E,[s[1]||(s[1]=t("span",{class:"tag"},"话题",-1)),t("h1",null,e(n.value.title),1),t("p",null,e(n.value.desc),1),t("div",H,[t("button",{class:"ghost-button",onClick:y},e(m.value?"已收藏":"收藏话题"),1),t("button",{class:"primary-button",onClick:x},e(d.value?"已加入":"参与话题"),1)])]),t("div",J,[t("img",{src:n.value.image,alt:n.value.title,loading:"lazy",decoding:"async"},null,8,M)])]),t("section",U,[t("div",null,[t("strong",null,e(p.value?.members),1),s[2]||(s[2]=t("span",null,"参与者",-1))]),t("div",null,[t("strong",null,e(p.value?.today),1),s[3]||(s[3]=t("span",null,"今日新增",-1))]),t("div",null,[t("strong",null,e(p.value?.sounds),1),s[4]||(s[4]=t("span",null,"声音数量",-1))])]),t("section",q,[t("div",G,[s[5]||(s[5]=t("h3",null,"采集建议",-1)),t("p",null,e(n.value.guideline),1)]),t("div",K,[s[6]||(s[6]=t("h3",null,"最新动态",-1)),t("ul",null,[(i(!0),u(g,null,b(n.value.updates,l=>(i(),u("li",{key:l.title+l.time},[t("span",null,e(l.title),1),t("small",null,e(l.author)+" · "+e(l.time),1)]))),128))])])]),t("section",O,[s[7]||(s[7]=t("h3",null,"最新评论",-1)),t("ul",P,[(i(!0),u(g,null,b(n.value.discussions,l=>(i(),u("li",{key:l.name+l.time+l.text},[t("strong",null,e(l.name),1),t("small",null,e(l.time),1),t("p",null,e(l.text),1)]))),128))]),t("div",Q,[R(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),rows:"3",placeholder:"分享你的声音线索或采集心得"},null,512),[[V,c.value]]),t("div",W,[t("span",X,e(a.value),1),t("button",{class:"ghost-button",onClick:k},"提交讨论")])])])])):(i(),u("div",Y,[s[9]||(s[9]=t("h2",null,"话题不存在",-1)),s[10]||(s[10]=t("p",null,"该话题可能已下线或未发布。",-1)),L(T,{class:"primary-button",to:"/community"},{default:N(()=>[...s[8]||(s[8]=[I("返回社区",-1)])]),_:1})]))}}},et=w(Z,[["__scopeId","data-v-5701371f"]]);export{et as default};
